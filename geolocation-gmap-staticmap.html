<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<base href="https://m-husein.github.io/selfi-js/">
<title>Geolocation Gmap Staticmap</title>
<link rel="stylesheet" href="css/bootstrap.css">
<style>
p{margin:0;}
</style>
</head>
<body>
<!-- Learn about this code on MDN: https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/Using_geolocation -->
<div class="container">
	<p><span class="btn btn-primary" onclick="geoFindMe()">Show my location</span></p>
	<div id="out"></div>
</div>

<script>
function geoFindMe(){
  var output = document.getElementById("out");

  if(!navigator.geolocation){
    output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
    return;
  }

  function success(position){
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;

    output.innerHTML = '<p>Latitude is '+latitude+'° <br>Longitude is '+longitude+'°</p>';

    var img = new Image();
    img.src = "https://maps.googleapis.com/maps/api/staticmap?center="+latitude+","+longitude+"&zoom=18&size=600x300&maptype=roadmap&markers="+latitude+","+longitude+"&key=AIzaSyDVFjTZ0d5hh5L8_rmZWC9zNOCgZ9a8Gy4"; // &sensor=false
    output.appendChild(img);
  }

  function error(){
    output.innerHTML = "Unable to retrieve your location";
  }

  output.innerHTML = "<p>Locating…</p>";
  navigator.geolocation.getCurrentPosition(success,error);
}
</script>

</body></html>
